# ------------------------------------------------------------------------------
# go project
# ------------------------------------------------------------------------------

GO      = go build
LD      = go build -o
EX      =
TEST    = go test
FMT     = go fmt

# ------------------------------------------------------------------------------
# configuraiton
# ------------------------------------------------------------------------------
REPO      = alpha
LIBS      = github.com/xiejw/${REPO}/...
BUILD_DIR = .build

# ------------------------------------------------------------------------------
# actions
# ------------------------------------------------------------------------------

.PHONY: compile

compile: ${BUILD_DIR} ${LIBS} ${BUILD_DIR}/alpha

${BUILD_DIR}:
	mkdir -p ${BUILD_DIR}

${LIBS}:
	${GO} $@

fmt:
	${FMT} ${LIBS}

test:
	${TEST} ${LIBS}

clean:
	go mod tidy

# ------------------------------------------------------------------------------
# binaries
# ------------------------------------------------------------------------------
alpah: ${BUILD_DIR}/alpha

${BUILD_DIR}/alpha:
	${LD} $@ cmd/alpha/main.go

